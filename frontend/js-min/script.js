function onMouseDown(e){verticesLayer.activate(),(path=new Path).strokeColor="white";var t=new Path.Circle({center:e.point,radius:7});t.strokeColor="black",t.fillColor="white",vertices.push(new Vertex(e.point.x,e.point.y))}function drawEdges(e,t){if(t>=e.length)return $("#btn-compute").attr("disabled",!1),void $("#btn-reset").attr("disabled",!1);setTimeout(function(){var r=e[t],n=new Point(r.a.x,r.a.y),i=new Point(r.b.x,r.b.y),a=new Path.Line(n,i);a.strokeColor="#98FB98",a.strokeWidth=3,drawEdges(e,t+1)},50)}function primsAlgorithm(e,t){for(var r=[],n=[],i=0;i<e.length;i++)for(var a=e[i],o=0;o<e.length;o++)o!=i&&a.addToAdj(new Edge(a,e[o]));for(n.push(e[0]);n.length!=e.length;){for(var s=!1,l=Number.MAX_VALUE,i=0;i<n.length;i++)for(o=0;o<n[i].adj.length;o++){var d=n[i].adj[o],u=d.b;if(d.weight()<l){if(includesVertex(n,u))continue;s=d,l=d.weight()}}n.push(s.b),r.push(s)}t(r)}function kruskalsAlgorithm(e,t){for(var r=[],n=[],i=[],a=0;a<e.length;a++)for(var o=e[a],s=0;s<e.length;s++)s!=a&&i.push(new Edge(o,e[s]));var l=new UnionFind(e.length);i.sort(function(e,t){return e.weight()<t.weight()?-1:e.weight()>t.weight()?1:0});for(a=0;a<i.length&&r.length!=e.length-1;a+=1){var d=i[a],u=getVertexIndex(e,d.a),h=getVertexIndex(e,d.b),c=includesVertex(n,d.a),g=includesVertex(n,d.b);includesEdge(r,d)||c&&g||l.find(u)==l.find(h)||(r.push(d),c?n.push(d.b):n.push(d.a),l.union(u,h))}t(r)}function includesVertex(e,t){for(var r=0;r<e.length;r++)if(e[r].equals(t))return!0;return!1}function includesEdge(e,t){for(var r=0;r<e.length;r++)if(e[r].contains(t.a)&&e[r].contains(t.b))return!0;return!1}function getVertexIndex(e,t){for(var r=0;r<e.length;r++)if(e[r].equals(t))return r;return-1}var path,vertices=[],verticesLayer=new Layer,edgesLayer=new Layer,mstLayer=new Layer;$("#btn-compute").click(function(){var e=$("#select-algo option:selected").val();void 0!==e&&e&&0!=vertices.length&&($("#btn-compute").attr("disabled",!0),$("#btn-reset").attr("disabled",!0),e==PRIM?primsAlgorithm(vertices,function(e){e&&void 0!==e&&(mstLayer.activate(),mstLayer.removeChildren(),drawEdges(e,0))}):e==KRUSKAL&&kruskalsAlgorithm(vertices,function(e){e&&void 0!==e&&(mstLayer.activate(),mstLayer.removeChildren(),drawEdges(e,0))}))}),$("#btn-reset").click(function(){verticesLayer.removeChildren(),mstLayer.removeChildren(),paper.view.draw(),vertices=[],edges=[]});